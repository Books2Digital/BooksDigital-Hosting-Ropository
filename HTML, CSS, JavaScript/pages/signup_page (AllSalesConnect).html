<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AllSalesConnect - Registration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2557a7;
            --secondary: #e6582f;
            --background: #f5f7fa;
            --text: #333;
            --card-bg: #fff;
            --header-bg: #fff;
            --border: #e0e6ef;
            --shadow: rgba(0, 0, 0, 0.05);
            --success: #28a745;
            --error: #dc3545;
            --light-gray: #f8f9fa;
        }

        .dark-mode {
            --primary: #4a86e8;
            --secondary: #ff8c66;
            --background: #1a1a2e;
            --text: #f0f0f0;
            --card-bg: #16213e;
            --header-bg: #16213e;
            --border: #2d3748;
            --shadow: rgba(0, 0, 0, 0.2);
            --light-gray: #1e2a4a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--header-bg);
            box-shadow: 0 2px 10px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background-color 0.3s;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            color: var(--secondary);
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text);
            margin-left: 15px;
        }

        /* Registration Type Selector */
        .registration-type {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            gap: 20px;
        }

        .type-selector {
            padding: 20px 40px;
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            flex: 1;
            max-width: 300px;
        }

        .type-selector:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .type-selector.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary) 0%, #1a4687 100%);
            color: white;
        }

        .type-selector i {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .type-selector h3 {
            margin-bottom: 10px;
        }

        /* Auth Container */
        .auth-container {
            width: 100%;
            max-width: 1000px;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow);
            margin: 20px auto;
            transition: background-color 0.3s, box-shadow 0.3s;
            display: none;
        }

        .auth-container.active {
            display: block;
        }

        .auth-header {
            background: linear-gradient(135deg, var(--primary) 0%, #1a4687 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .auth-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .auth-content {
            padding: 30px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-input, .form-textarea, .form-select, .signup_input {
            width: 100%;
            padding: 14px 15px;
            border: 1px solid var(--border);
            border-radius: 5px;
            background-color: var(--light-gray);
            color: var(--text);
            font-family: inherit;
            font-size: 1rem;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus, .signup_input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(37, 87, 167, 0.2);
        }

        .input-error {
            border-color: var(--error);
        }

        .error-message {
            color: var(--error);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .checkbox-group input {
            margin-right: 10px;
        }

        .submit-btn, .submit_button {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: background 0.3s;
        }

        .submit-btn:hover, .submit_button:hover {
            background: #1a4687;
        }

        .submit-btn:disabled, .submit_button:disabled {
            background: #8faee5;
            cursor: not-allowed;
        }

        .auth-footer {
            text-align: center;
            margin-top: 20px;
        }

        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Individual Signup Styles */
        .signup_container {
            max-width: 500px;
            margin: 0 auto;
        }

        .Signup_title {
            text-align: center;
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .line {
            border: none;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--primary), transparent);
            margin: 20px 0;
        }

        .signup_input {
            margin-bottom: 15px;
        }

        .already {
            display: block;
            text-align: center;
            color: var(--primary);
            text-decoration: none;
            margin-top: 20px;
        }

        .already:hover {
            text-decoration: underline;
        }

        /* Verification Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }

        .verification-modal {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            position: relative;
            transition: background-color 0.3s;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text);
        }

        .verification-modal h2 {
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
        }

        .verification-modal p {
            margin-bottom: 20px;
            line-height: 1.6;
            text-align: center;
        }

        .verification-code {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .verification-code input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid var(--border);
            border-radius: 5px;
            background: var(--light-gray);
            color: var(--text);
            transition: background-color 0.3s, border-color 0.3s;
        }

        .verification-code input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .resend-link {
            color: var(--primary);
            cursor: pointer;
            margin-top: 15px;
            display: inline-block;
            text-align: center;
        }

        .resend-link:hover {
            text-decoration: underline;
        }

        /* Success Screen */
        .success-screen {
            text-align: center;
            padding: 40px 20px;
            display: none;
        }

        .success-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
        }

        .success-screen h2 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .success-screen p {
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            margin-bottom: 30px;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .progress-step:not(:last-child):after {
            content: '';
            position: absolute;
            top: 15px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--border);
            z-index: 1;
            transition: background-color 0.3s;
        }

        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            position: relative;
            z-index: 2;
            transition: background-color 0.3s, color 0.3s;
        }

        .step-text {
            font-size: 0.9rem;
            color: var(--text);
            transition: color 0.3s;
        }

        .progress-step.active .step-number {
            background: var(--primary);
            color: white;
        }

        .progress-step.completed .step-number {
            background: var(--success);
            color: white;
        }

        .progress-step.completed:after {
            background: var(--success);
        }

        /* Form Sections */
        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        /* Industry Tags */
        .industry-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .industry-tag {
            padding: 8px 15px;
            background: var(--light-gray);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .industry-tag.selected {
            background: var(--primary);
            color: white;
        }

        /* Company Profile Preview */
        .profile-preview {
            background: var(--light-gray);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--border);
        }

        .profile-preview h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .registration-type {
                flex-direction: column;
                align-items: center;
            }
            
            .type-selector {
                max-width: 100%;
            }
            
            .auth-header {
                padding: 20px;
            }
            
            .auth-content {
                padding: 20px;
            }
            
            .verification-code {
                gap: 5px;
            }
            
            .verification-code input {
                width: 40px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .progress-bar {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-step:not(:last-child):after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>AllSalesConnect</span>
                </a>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Registration Type Selector -->
        <div class="registration-type">
            <div class="type-selector active" data-type="individual">
                <i class="fas fa-user"></i>
                <h3>Individual Account</h3>
                <p>Sign up as a job seeker</p>
            </div>
            <div class="type-selector" data-type="company">
                <i class="fas fa-building"></i>
                <h3>Company Account</h3>
                <p>Register your company</p>
            </div>
        </div>

        <!-- Individual Signup Form -->
        <div class="auth-container active" id="individual-signup">
            <div class="auth-header">
                <h1>Create Your Account</h1>
                <p>Join as a sales professional to find your next opportunity</p>
            </div>
            
            <div class="auth-content">
                <div class="signup_container">
                    <form id="signupForm">
                        <h2 class="Signup_title">Sign Up</h2>
                        <hr class="line">
                        
                        <div class="form-group">
                            <input class="signup_input" type="text" name="first_name" placeholder="First Name" required>
                            <div class="error-message" id="individual-first-name-error">Please enter your first name</div>
                        </div>
                        
                        <div class="form-group">
                            <input class="signup_input" type="text" name="last_name" placeholder="Last Name" required>
                            <div class="error-message" id="individual-last-name-error">Please enter your last name</div>
                        </div>
                        
                        <div class="form-group">
                            <input class="signup_input" type="email" name="email" placeholder="Email" required>
                            <div class="error-message" id="individual-email-error">Please enter a valid email address</div>
                        </div>
                        
                        <div class="form-group">
                            <input class="signup_input" type="password" name="password" placeholder="Password" required>
                            <div class="error-message" id="individual-password-error">Password must be at least 8 characters with uppercase, lowercase, and number</div>
                        </div>
                        
                        <div class="form-group">
                            <input class="signup_input" type="password" name="confirm_password" placeholder="Confirm Password" required>
                            <div class="error-message" id="individual-confirm-error">Passwords do not match</div>
                        </div>
                        
                        <div class="form-group">
                            <input class="signup_input" type="tel" name="phone" placeholder="Phone (Optional)">
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="individual-terms" required>
                            <label for="individual-terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                        </div>
                        
                        <button class="submit_button" type="submit" id="individual-submit">
                            <span id="individual-submit-text">Create Account</span>
                            <span id="individual-submit-spinner" style="display: none;" class="loading-spinner"></span>
                        </button>
                    </form>
                    
                    <a class="already" href="/HTML, CSS, JavaScript/pages/login_page.html">Already have an account?</a>
                </div>
            </div>
        </div>

        <!-- Company Registration Form -->
        <div class="auth-container" id="company-registration-form">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-step active">
                    <div class="step-number">1</div>
                    <div class="step-text">Company Info</div>
                </div>
                <div class="progress-step">
                    <div class="step-number">2</div>
                    <div class="step-text">Company Profile</div>
                </div>
                <div class="progress-step">
                    <div class="step-number">3</div>
                    <div class="step-text">Email Verification</div>
                </div>
                <div class="progress-step">
                    <div class="step-number">4</div>
                    <div class="step-text">Confirm & Complete</div>
                </div>
            </div>

            <div class="auth-header">
                <h1>Company Registration</h1>
                <p>Create your company account to start posting jobs</p>
            </div>
            
            <div class="auth-content">
                <!-- Company Info Section -->
                <form id="company-registration-form">
                    <div class="form-section active" id="company-info-section">
                        <h2>Company Information</h2>
                        <div class="form-group">
                            <label for="company-name" class="form-label">Company Name *</label>
                            <input type="text" id="company-name" class="form-input" placeholder="Enter your company name" required>
                            <div class="error-message" id="name-error">Please enter a valid company name</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="company-email" class="form-label">Work Email Address *</label>
                            <input type="email" id="company-email" class="form-input" placeholder="company@example.com" required>
                            <div class="error-message" id="email-error">Please enter a valid email address</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="company-password" class="form-label">Password *</label>
                            <input type="password" id="company-password" class="form-input" placeholder="Create a strong password" required>
                            <div class="error-message" id="password-error">Password must be at least 8 characters with uppercase, lowercase, and number</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password" class="form-label">Confirm Password *</label>
                            <input type="password" id="confirm-password" class="form-input" placeholder="Confirm your password" required>
                            <div class="error-message" id="confirm-error">Passwords do not match</div>
                        </div>
                        
                        <button type="button" class="submit-btn" id="next-to-profile">Next: Company Profile</button>
                    </div>

                    <!-- Company Profile Section -->
                    <div class="form-section" id="company-profile-section">
                        <h2>Company Profile</h2>
                        <p>This information will be visible to job seekers on your company profile page.</p>
                        
                        <div class="form-group">
                            <label for="company-industry" class="form-label">Industry *</label>
                            <select id="company-industry" class="form-select" required>
                                <option value="">Select your industry</option>
                                <option value="technology">Technology</option>
                                <option value="finance">Finance & Banking</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="retail">Retail</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="company-size" class="form-label">Company Size *</label>
                            <select id="company-size" class="form-select" required>
                                <option value="">Select company size</option>
                                <option value="1-10">1-10 employees</option>
                                <option value="11-50">11-50 employees</option>
                                <option value="51-200">51-200 employees</option>
                                <option value="201-500">201-500 employees</option>
                                <option value="501-1000">501-1000 employees</option>
                                <option value="1000+">1000+ employees</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="company-website" class="form-label">Website</label>
                            <input type="url" id="company-website" class="form-input" placeholder="https://yourcompany.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="company-description" class="form-label">Company Description *</label>
                            <textarea id="company-description" class="form-textarea" placeholder="Describe your company, culture, and mission" required minlength="10"></textarea>
                            <div class="error-message" id="description-error">Description must be at least 10 characters long</div>
                        </div>
                        
                        <div class="profile-preview">
                            <h3>Profile Preview</h3>
                            <p><strong>Company Name:</strong> <span id="preview-name">Not provided</span></p>
                            <p><strong>Industry:</strong> <span id="preview-industry">Not provided</span></p>
                            <p><strong>Size:</strong> <span id="preview-size">Not provided</span></p>
                            <p><strong>Description:</strong> <span id="preview-description">Not provided</span></p>
                        </div>
                        
                        <div class="form-group" style="display: flex; gap: 10px;">
                            <button type="button" class="submit-btn" style="flex: 1;" id="back-to-info">Back</button>
                            <button type="button" class="submit-btn" style="flex: 1;" id="next-to-verification">Next: Email Verification</button>
                        </div>
                    </div>

                    <!-- Email Verification Section -->
                    <div class="form-section" id="email-verification-section">
                        <h2>Email Verification</h2>
                        <p>We've sent a verification code to <strong id="verification-email"></strong>. Please check your inbox and enter the code below.</p>
                        <p style="color: var(--secondary); font-size: 0.9rem; margin-bottom: 15px;">
                            <i class="fas fa-info-circle"></i> Check your console for the verification code during development
                        </p>
                        
                        <div class="form-group">
                            <label class="form-label">Verification Code *</label>
                            <div class="verification-code">
                                <input type="text" maxlength="1" id="digit-1" class="form-input" inputmode="numeric">
                                <input type="text" maxlength="1" id="digit-2" class="form-input" inputmode="numeric">
                                <input type="text" maxlength="1" id="digit-3" class="form-input" inputmode="numeric">
                                <input type="text" maxlength="1" id="digit-4" class="form-input" inputmode="numeric">
                                <input type="text" maxlength="1" id="digit-5" class="form-input" inputmode="numeric">
                                <input type="text" maxlength="1" id="digit-6" class="form-input" inputmode="numeric">
                            </div>
                            <div class="error-message" id="code-error">Please enter a valid verification code</div>
                        </div>
                        
                        <p class="resend-link" id="resend-code">Didn't receive the code? Resend</p>
                        
                        <div class="form-group" style="display: flex; gap: 10px;">
                            <button type="button" class="submit-btn" style="flex: 1;" id="back-to-profile-2">Back</button>
                            <button type="button" class="submit-btn" style="flex: 1;" id="verify-email">
                                <span id="verify-text">Verify Email</span>
                                <span id="verify-spinner" style="display: none;" class="loading-spinner"></span>
                            </button>
                        </div>
                    </div>

                    <!-- Confirm & Complete Section -->
                    <div class="form-section" id="confirm-complete-section">
                        <h2>Confirm & Complete</h2>
                        <p>Please review your information and confirm to complete your registration.</p>
                        
                        <div class="profile-preview">
                            <h3>Registration Summary</h3>
                            <p><strong>Company Name:</strong> <span id="summary-name"></span></p>
                            <p><strong>Email:</strong> <span id="summary-email"></span></p>
                            <p><strong>Industry:</strong> <span id="summary-industry"></span></p>
                            <p><strong>Company Size:</strong> <span id="summary-size"></span></p>
                            <p><strong>Website:</strong> <span id="summary-website">Not provided</span></p>
                            <p><strong>Status:</strong> <span style="color: var(--success);">âœ“ Email Verified</span></p>
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="terms" required>
                            <label for="terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                        </div>
                        
                        <div class="form-group" style="display: flex; gap: 10px;">
                            <button type="button" class="submit-btn" style="flex: 1;" id="back-to-verification">Back</button>
                            <button type="submit" class="submit-btn" style="flex: 1;" id="complete-registration">
                                <span id="complete-text">Complete Registration</span>
                                <span id="complete-spinner" style="display: none;" class="loading-spinner"></span>
                            </button>
                        </div>
                    </div>
                </form>
                
                <div class="auth-footer">
                    Already have an account? <a href="sign_in.html">Sign In</a>
                </div>
            </div>
        </div>

        <!-- Success Screens -->
        <div class="auth-container success-screen" id="individual-success-screen">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Account Created Successfully!</h2>
            <p>Your individual account has been created. You can now browse jobs and apply for positions.</p>
            <button class="submit-btn" id="go-to-dashboard-individual">Go to Dashboard</button>
        </div>

        <div class="auth-container success-screen" id="company-success-screen">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Registration Successful!</h2>
            <p>Your company account has been created successfully. You can now post job listings and find talented sales professionals.</p>
            <button class="submit-btn" id="go-to-dashboard-company">Go to Dashboard</button>
        </div>
    </div>

    <script>
        // API base URL - adjust based on your deployment
        const API_BASE_URL = 'http://localhost:8000';

        document.addEventListener('DOMContentLoaded', function() {
            // Registration type selector
            const typeSelectors = document.querySelectorAll('.type-selector');
            const individualForm = document.getElementById('individual-signup');
            const companyForm = document.getElementById('company-registration-form');
            const individualSuccess = document.getElementById('individual-success-screen');
            const companySuccess = document.getElementById('company-success-screen');

            // Individual signup form elements
            const individualSignupForm = document.getElementById('signupForm');
            const individualSubmitBtn = document.getElementById('individual-submit');
            const individualSubmitText = document.getElementById('individual-submit-text');
            const individualSubmitSpinner = document.getElementById('individual-submit-spinner');

            // Company registration elements (existing code)
            const companyRegistrationForm = document.getElementById('company-registration-form');
            const successScreens = document.querySelectorAll('.success-screen');
            const progressSteps = document.querySelectorAll('.progress-step');
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('i');
            
            // Form sections
            const sections = {
                info: document.getElementById('company-info-section'),
                profile: document.getElementById('company-profile-section'),
                verification: document.getElementById('email-verification-section'),
                complete: document.getElementById('confirm-complete-section')
            };
            
            // Store registration data
            let registrationData = {
                email: '',
                companyName: '',
                password: '',
                companyId: ''
            };

            // Theme toggle functionality
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
            
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    localStorage.setItem('theme', 'light');
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
            });

            // Registration type selection
            typeSelectors.forEach(selector => {
                selector.addEventListener('click', () => {
                    typeSelectors.forEach(s => s.classList.remove('active'));
                    selector.classList.add('active');
                    
                    const type = selector.getAttribute('data-type');
                    individualForm.classList.toggle('active', type === 'individual');
                    companyForm.classList.toggle('active', type === 'company');
                    
                    // Hide success screens when switching types
                    successScreens.forEach(screen => screen.style.display = 'none');
                });
            });

            // API call function
            async function apiCall(url, method, data = null) {
                try {
                    const options = {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    };
                    
                    if (data) {
                        options.body = JSON.stringify(data);
                    }
                    
                    const response = await fetch(`${API_BASE_URL}${url}`, options);
                    const result = await response.json();
                    
                    if (!response.ok) {
                        throw new Error(result.detail || `HTTP error! status: ${response.status}`);
                    }
                    
                    return result;
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }

            // Individual signup form submission
            individualSignupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const formData = {
                    first_name: document.querySelector('input[name="first_name"]').value,
                    last_name: document.querySelector('input[name="last_name"]').value,
                    email: document.querySelector('input[name="email"]').value,
                    password: document.querySelector('input[name="password"]').value,
                    phone: document.querySelector('input[name="phone"]').value || ''
                };

                // Password confirmation check
                const confirmPassword = document.querySelector('input[name="confirm_password"]').value;
                if (formData.password !== confirmPassword) {
                    alert('Passwords do not match!');
                    return;
                }

                // Terms check
                const termsCheckbox = document.getElementById('individual-terms');
                if (!termsCheckbox.checked) {
                    alert('Please accept the terms and conditions');
                    return;
                }

                // Show loading state
                individualSubmitText.style.display = 'none';
                individualSubmitSpinner.style.display = 'inline-block';
                individualSubmitBtn.disabled = true;

                try {
                    // Send individual signup data to your backend
                    const result = await apiCall('/api/register/individual', 'POST', {
                        ...formData,
                        user_type: 'individual'
                    });

                    // Show success screen
                    individualForm.style.display = 'none';
                    individualSuccess.style.display = 'block';
                    
                } catch (error) {
                    alert(error.message || 'Registration failed. Please try again.');
                } finally {
                    // Reset loading state
                    individualSubmitText.style.display = 'inline';
                    individualSubmitSpinner.style.display = 'none';
                    individualSubmitBtn.disabled = false;
                }
            });

            // Individual success screen button
            document.getElementById('go-to-dashboard-individual').addEventListener('click', () => {
                alert('Redirecting to individual dashboard...');
                // window.location.href = '/dashboard-individual.html';
            });

            // ===== EXISTING COMPANY REGISTRATION CODE =====
            // (Keep all the existing company registration JavaScript code from previous version)
            // Navigation functions
            function showSection(section) {
                Object.values(sections).forEach(sec => sec.classList.remove('active'));
                sections[section].classList.add('active');
                
                progressSteps.forEach((step, index) => {
                    step.classList.remove('active', 'completed');
                    if (index < getSectionIndex(section)) {
                        step.classList.add('completed');
                    }
                });
                progressSteps[getSectionIndex(section)].classList.add('active');
            }
            
            function getSectionIndex(section) {
                const sectionOrder = ['info', 'profile', 'verification', 'complete'];
                return sectionOrder.indexOf(section);
            }
            
            // Form validation functions
            async function validateCompanyInfo() {
                let isValid = true;
                const companyName = document.getElementById('company-name');
                const companyEmail = document.getElementById('company-email');
                const companyPassword = document.getElementById('company-password');
                const confirmPassword = document.getElementById('confirm-password');
                
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                    el.textContent = el.getAttribute('data-original-text') || el.textContent;
                });
                document.querySelectorAll('.form-input').forEach(el => el.classList.remove('input-error'));
                
                if (companyName.value.trim() === '') {
                    document.getElementById('name-error').style.display = 'block';
                    companyName.classList.add('input-error');
                    isValid = false;
                }
                
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(companyEmail.value)) {
                    document.getElementById('email-error').style.display = 'block';
                    companyEmail.classList.add('input-error');
                    isValid = false;
                }
                
                const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
                if (!passwordRegex.test(companyPassword.value)) {
                    document.getElementById('password-error').style.display = 'block';
                    companyPassword.classList.add('input-error');
                    isValid = false;
                }
                
                if (companyPassword.value !== confirmPassword.value) {
                    document.getElementById('confirm-error').style.display = 'block';
                    confirmPassword.classList.add('input-error');
                    isValid = false;
                }
                
                if (!isValid) return false;
                
                registrationData.email = companyEmail.value;
                registrationData.companyName = companyName.value;
                registrationData.password = companyPassword.value;
                
                try {
                    const result = await apiCall('/api/register/company-info', 'POST', {
                        company_name: companyName.value,
                        email: companyEmail.value,
                        password: companyPassword.value
                    });
                    
                    registrationData.companyId = result.company_id;
                    return true;
                } catch (error) {
                    document.getElementById('email-error').textContent = error.message;
                    document.getElementById('email-error').style.display = 'block';
                    companyEmail.classList.add('input-error');
                    return false;
                }
            }
            
            function validateCompanyProfile() {
                let isValid = true;
                const industry = document.getElementById('company-industry');
                const size = document.getElementById('company-size');
                const description = document.getElementById('company-description');
                
                document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.form-input, .form-select, .form-textarea').forEach(el => el.classList.remove('input-error'));
                
                if (industry.value === '') {
                    isValid = false;
                    industry.classList.add('input-error');
                }
                
                if (size.value === '') {
                    isValid = false;
                    size.classList.add('input-error');
                }
                
                if (description.value.trim() === '' || description.value.trim().length < 10) {
                    isValid = false;
                    document.getElementById('description-error').style.display = 'block';
                    description.classList.add('input-error');
                }
                
                return isValid;
            }
            
            async function validateVerificationCode() {
                const digitInputs = document.querySelectorAll('.verification-code input');
                const code = Array.from(digitInputs).map(input => input.value).join('');
                
                document.getElementById('code-error').style.display = 'none';
                digitInputs.forEach(input => input.classList.remove('input-error'));
                
                if (code.length !== 6) {
                    document.getElementById('code-error').style.display = 'block';
                    digitInputs.forEach(input => input.classList.add('input-error'));
                    return false;
                }
                
                const verifyText = document.getElementById('verify-text');
                const verifySpinner = document.getElementById('verify-spinner');
                verifyText.style.display = 'none';
                verifySpinner.style.display = 'inline-block';
                
                try {
                    await apiCall('/api/register/verify-email', 'POST', {
                        email: registrationData.email,
                        code: code
                    });
                    
                    verifyText.style.display = 'inline';
                    verifySpinner.style.display = 'none';
                    return true;
                } catch (error) {
                    verifyText.style.display = 'inline';
                    verifySpinner.style.display = 'none';
                    document.getElementById('code-error').textContent = error.message;
                    document.getElementById('code-error').style.display = 'block';
                    digitInputs.forEach(input => input.classList.add('input-error'));
                    return false;
                }
            }
            
            function updateProfilePreview() {
                document.getElementById('preview-name').textContent = 
                    document.getElementById('company-name').value || 'Not provided';
                
                const industrySelect = document.getElementById('company-industry');
                document.getElementById('preview-industry').textContent = 
                    industrySelect.options[industrySelect.selectedIndex].text || 'Not provided';
                
                const sizeSelect = document.getElementById('company-size');
                document.getElementById('preview-size').textContent = 
                    sizeSelect.options[sizeSelect.selectedIndex].text || 'Not provided';
                
                const description = document.getElementById('company-description').value;
                document.getElementById('preview-description').textContent = 
                    description || 'Not provided';
                
                if (description && description.length < 10) {
                    document.getElementById('preview-description').style.color = 'var(--error)';
                } else {
                    document.getElementById('preview-description').style.color = '';
                }
            }
            
            function updateRegistrationSummary() {
                document.getElementById('summary-name').textContent = 
                    document.getElementById('company-name').value;
                
                document.getElementById('summary-email').textContent = 
                    document.getElementById('company-email').value;
                
                const industrySelect = document.getElementById('company-industry');
                document.getElementById('summary-industry').textContent = 
                    industrySelect.options[industrySelect.selectedIndex].text;
                
                const sizeSelect = document.getElementById('company-size');
                document.getElementById('summary-size').textContent = 
                    sizeSelect.options[sizeSelect.selectedIndex].text;
                
                const website = document.getElementById('company-website').value;
                document.getElementById('summary-website').textContent = 
                    website || 'Not provided';
            }
            
            // Navigation event listeners
            document.getElementById('next-to-profile').addEventListener('click', async () => {
                if (await validateCompanyInfo()) {
                    updateProfilePreview();
                    showSection('profile');
                }
            });
            
            document.getElementById('back-to-info').addEventListener('click', () => {
                showSection('info');
            });
            
            document.getElementById('next-to-verification').addEventListener('click', async () => {
                if (validateCompanyProfile()) {
                    try {
                        await apiCall('/api/register/company-profile', 'PUT', {
                            industry: document.getElementById('company-industry').value,
                            company_size: document.getElementById('company-size').value,
                            website: document.getElementById('company-website').value || null,
                            description: document.getElementById('company-description').value
                        });
                        
                        document.getElementById('verification-email').textContent = registrationData.email;
                        showSection('verification');
                    } catch (error) {
                        alert('Error saving profile: ' + error.message);
                    }
                }
            });
            
            document.getElementById('back-to-profile-2').addEventListener('click', () => {
                showSection('profile');
            });
            
            document.getElementById('verify-email').addEventListener('click', async () => {
                if (await validateVerificationCode()) {
                    updateRegistrationSummary();
                    showSection('complete');
                }
            });
            
            document.getElementById('back-to-verification').addEventListener('click', () => {
                showSection('verification');
            });
            
            // Company form submission
            companyRegistrationForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const termsCheckbox = document.getElementById('terms');
                if (!termsCheckbox.checked) {
                    alert('Please accept the terms and conditions');
                    return;
                }
                
                const completeText = document.getElementById('complete-text');
                const completeSpinner = document.getElementById('complete-spinner');
                completeText.style.display = 'none';
                completeSpinner.style.display = 'inline-block';
                
                try {
                    await apiCall('/api/register/complete', 'POST', {
                        email: registrationData.email,
                        terms_accepted: true
                    });
                    
                    companyForm.style.display = 'none';
                    companySuccess.style.display = 'block';
                    
                    progressSteps.forEach(step => {
                        step.classList.remove('active');
                        step.classList.add('completed');
                    });
                    
                } catch (error) {
                    alert('Error completing registration: ' + error.message);
                } finally {
                    completeText.style.display = 'inline';
                    completeSpinner.style.display = 'none';
                }
            });
            
            // Verification code input handling
            const digitInputs = document.querySelectorAll('.verification-code input');
            digitInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/\D/g, '');
                    
                    if (this.value.length === 1 && index < digitInputs.length - 1) {
                        digitInputs[index + 1].focus();
                    }
                    
                    const allFilled = Array.from(digitInputs).every(input => input.value.length === 1);
                    if (allFilled && index === digitInputs.length - 1) {
                        document.getElementById('verify-email').click();
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value === '' && index > 0) {
                        digitInputs[index - 1].focus();
                    }
                });
                
                input.addEventListener('paste', function(e) {
                    e.preventDefault();
                    const pasteData = e.clipboardData.getData('text').replace(/\D/g, '');
                    if (pasteData.length === 6) {
                        pasteData.split('').forEach((digit, i) => {
                            if (digitInputs[i]) {
                                digitInputs[i].value = digit;
                            }
                        });
                        digitInputs[5].focus();
                    }
                });
            });
            
            // Resend code functionality
            document.getElementById('resend-code').addEventListener('click', async function() {
                const resendLink = this;
                const originalText = resendLink.textContent;
                
                try {
                    resendLink.textContent = 'Sending...';
                    resendLink.style.pointerEvents = 'none';
                    
                    await apiCall(`/api/register/resend-code?email=${encodeURIComponent(registrationData.email)}`, 'POST');
                    
                    resendLink.textContent = 'Code sent! Check your email.';
                    setTimeout(() => {
                        resendLink.textContent = originalText;
                        resendLink.style.pointerEvents = 'auto';
                    }, 3000);
                    
                } catch (error) {
                    alert('Error resending code: ' + error.message);
                    resendLink.textContent = originalText;
                    resendLink.style.pointerEvents = 'auto';
                }
            });
            
            // Company success screen button
            document.getElementById('go-to-dashboard-company').addEventListener('click', function() {
                alert('Redirecting to company dashboard...');
            });
            
            // Real-time profile preview updates
            document.getElementById('company-name').addEventListener('input', updateProfilePreview);
            document.getElementById('company-industry').addEventListener('change', updateProfilePreview);
            document.getElementById('company-size').addEventListener('change', updateProfilePreview);
            document.getElementById('company-description').addEventListener('input', updateProfilePreview);
            document.getElementById('company-website').addEventListener('input', updateProfilePreview);
            
            // Store original error messages
            document.querySelectorAll('.error-message').forEach(el => {
                el.setAttribute('data-original-text', el.textContent);
            });
        });
    </script>
</body>
</html>